% MaTeX LaTeX package
% Martin Azpillaga

\NeedsTeXFormat{LaTeX2e}[1994/12/01]
\ProvidesPackage{matex} [2013/11/30 v0.10 LaTeX package for my own ]

\RequirePackage{amsmath,amssymb}
\RequirePackage[tmargin=20mm,bmargin=20mm,lmargin=22mm,rmargin=22mm]{geometry}
\RequirePackage{fancyhdr}
\RequirePackage{xparse}
\RequirePackage{MnSymbol}
\RequirePackage{hyperref}


% Hacks
%\setlength{\parindent}{0cm} % disable paragraph indentation
%\endlinechar=-1\relax % disable new paragraph with 2 line breaks
\newenvironment{absolutelynopagebreak}
  {\par\nobreak\vfil\penalty0\vfilneg
   \vtop\bgroup}
  {\par\xdef\tpd{\the\prevdepth}\egroup
   \prevdepth=\tpd}
\newcommand*\cleartoleftpage{%
  \clearpage
  \ifodd\value{page}\hbox{}\newpage\fi
}


% Title and introduction

\newcommand{\titlePage}[2]{
\title{$#1$}
\author{$#2$}
\maketitle
}

\newcommand{\contents}{
\tableofcontents
\cleardoublepage
}

\newcommand{\introduction}[1]{ 
\begin{math}#1\end{math}
\cleardoublepage
\baselineskip=20pt
}


% Sections

\newcounter{unitcounter}
\newcounter{annexcounter}
\newcounter{blockcounter}[unitcounter]

\newcommand{\unitname}{unit}
\newcommand{\blockname}{block}

\newcommand{\block}[1]{
\setcounter{unitcounter}{0}
\addtocounter{blockcounter}{1}
\renewcommand{\blockname}{ $#1$ }
\addcontentsline{toc}{part}{ \Roman{blockcounter} $#1$ }
\cleardoublepage{}
\vspace*{\fill}
\begin{center}
{\bf \Huge{ Block \Roman{blockcounter} } }
\end{center}
\vspace*{1cm}
\begin{center}
{\bf \Huge{ $#1$ } }
\end{center}
\vspace*{\fill}
}

\newcommand{\unit}[1]{
\addtocounter{unitcounter}{1}
\renewcommand{\unitname}{ $#1$ }
\addcontentsline{toc}{chapter}{ \arabic{unitcounter} $#1$ }
\cleartoleftpage{}
\begin{center}
\fbox{{ \bf \arabic{unitcounter}. $#1$ }}
\end{center}
}

\newcommand{\annex}[1]{
\addtocounter{annexcounter}{1}
\addcontentsline{toc}{chapter}{ Annex \arabic{annexcounter}. $#1$ }
\cleartoleftpage{}
\begin{center}
\fbox{ {\bf Annex \arabic{annexcounter}. $#1$ }}
\end{center}
}

\newcommand{\definition}[2]{
\begin{absolutelynopagebreak}
\addcontentsline{toc}{section}{ $#1$ }
{\bf $#1$} \\
#2
\end{absolutelynopagebreak}
}

\newcommand{\proposition}[2]{
\addcontentsline{toc}{section}{ $#1$ }
{\bf $#1$} \\
#2
\newpage
}


% Page Style 

\pagestyle{fancy}
\fancyhead[RO,LE]{\thepage}
\fancyhead[RE]{\arabic{unitcounter} \unitname }
\fancyhead[LO]{\Roman{blockcounter} \blockname }
\fancyfoot[C]{\thepage}

% Custom Environments


%\leftskip=1.5in

\newcommand\myitem[1]{
\\ \hspace*{\value{tabspace}pt} \begin{math} \cdot \; #1 \end{math}
}
\newcommand\nodotentry[1]{
\\ \hspace*{\value{tabspace}pt} \begin{math} #1 \end{math}
}






\newcounter{tabspace}

\newcommand{\arrayEntry}[1]{ #1 \\  }
\newcommand{\columnEntry}[1]{ #1 \\  }

\NewDocumentCommand{\multiple}{O{.}O{.} >{\SplitList{.}} m}{
\left #1
\begin{array}{l}
\ProcessList{ #3 }{\arrayEntry}
\end{array}
\right #2
}

\NewDocumentCommand{\tabtext}{ m >{\SplitList{.}} m }{%
#1:
\addtocounter{tabspace}{15}
\ProcessList{ #2 }{ \myitem }
\addtocounter{tabspace}{-15}
\\
}

\NewDocumentCommand{\tabmath}{ m >{\SplitList{.}} m }{%
#1:
\addtocounter{tabspace}{15}%
\ProcessList{ #2 }{ \nodotentry }%
\addtocounter{tabspace}{-15}%
}%



% Math Structures

\newcommand{\letbe}[1] {\tabtext{Let}{#1}}

\newcommand{\then}[3]  {\tabtext{Then, $#1$ is $#2$ if}{#3}}

\newcommand{\call}[2]  {\tabtext{We call $#1$ to}{#2}}

\newcommand{\denote}[1]{\tabtext{We denote}{#1}}


\newcommand{\holds}[1] {\tabtext{Then, holds}{#1}}

\newcommand{\demonstration}[1]{\tabmath{Demonstration}{#1}}


% Demonstration Structures

\newcommand{\rightinclusion}[1]{\end{math}\tabmath{$\subset$)}{ #1 }\begin{math}}
\newcommand{\leftinclusion} [1]{\end{math}\tabmath{$\supset$)}{ #1 }\begin{math}}

\newcommand{\rightway}[1]{\end{math}\tabmath{$\rightarrow$)}{ #1 }\begin{math}}
\newcommand{\leftway} [1]{\end{math}\tabmath{$\leftarrow$)} { #1 }\begin{math}}

\newcommand{\upperbound}[1]{\end{math}\tabmath{$\leq$)}{ #1 }\begin{math}}
\newcommand{\lowerbound}[1]{\end{math}\tabmath{$\geq$)}{ #1 }\begin{math}}

\newcommand{\induction}[2]{\end{math}\tabmath{Induction over $#1$}{ #2 }\begin{math}}

\newcommand{\counterreciprocal}[3]{\end{math}\tabmath{Counter-reciprocal: $#1 \imp #2$ }{ #3 }\begin{math}}

\newcommand{\absurd}[2]{\end{math}\tabmath{Absurd: $#1$}{#2}\begin{math}}

\newcommand{\case}[2]{\end{math}\tabmath{Case $#1$}{#2}\begin{math}}

\newcommand{\step}[3]{\end{math}\tabmath{Step $#1$: $#2$}{ #3 }\begin{math}}



\newcommand{\similarly}[1]{\end{math}\tabmath{Similarly}{ #1 }\begin{math}}


% Abbreviations

\newcommand{\A}{\mathbb{A}}
\newcommand{\B}{\mathbb{B}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\D}{\mathbb{D}}
\newcommand{\E}{\mathbb{E}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\G}{\mathbb{G}}
\renewcommand{\H}{\mathbb{H}}
\newcommand{\I}{\mathbb{I}}
\newcommand{\J}{\mathbb{J}}
\newcommand{\K}{\mathbb{K}}
\renewcommand{\L}{\mathbb{L}}
\newcommand{\M}{\mathbb{M}}
\newcommand{\N}{\mathbb{N}}
\renewcommand{\O}{\mathbb{O}}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\renewcommand{\S}{\mathbb{S}}
\newcommand{\T}{\mathbb{T}}
\newcommand{\U}{\mathbb{U}}
\newcommand{\V}{\mathbb{V}}
\newcommand{\W}{\mathbb{W}}
\newcommand{\X}{\mathbb{X}}
\newcommand{\Y}{\mathbb{Y}}
\newcommand{\Z}{\mathbb{Z}}

\newcommand{\Ac}{\mathcal{A}}
\newcommand{\Bc}{\mathcal{B}}
\newcommand{\Cc}{\mathcal{C}}
\newcommand{\Dc}{\mathcal{D}}
\newcommand{\Ec}{\mathcal{E}}
\newcommand{\Fc}{\mathcal{F}}
\newcommand{\Gc}{\mathcal{G}}
\newcommand{\Hc}{\mathcal{H}}
\newcommand{\Ic}{\mathcal{I}}
\newcommand{\Jc}{\mathcal{J}}
\newcommand{\Kc}{\mathcal{K}}
\newcommand{\Lc}{\mathcal{L}}
\newcommand{\Mc}{\mathcal{M}}
\newcommand{\Nc}{\mathcal{N}}
\newcommand{\Oc}{\mathcal{O}}
\newcommand{\Pc}{\mathcal{P}}
\newcommand{\Qc}{\mathcal{Q}}
\newcommand{\Rc}{\mathcal{R}}
\newcommand{\Sc}{\mathcal{S}}
\newcommand{\Tc}{\mathcal{T}}
\newcommand{\Uc}{\mathcal{U}}
\newcommand{\Vc}{\mathcal{V}}
\newcommand{\Wc}{\mathcal{W}}
\newcommand{\Xc}{\mathcal{X}}
\newcommand{\Yc}{\mathcal{Y}}
\newcommand{\Zc}{\mathcal{Z}}

\newcommand{\phin}{\varphi}
\newcommand{\eps}{\varepsilon}


% Logic

\newcommand{\logicand}	{\; \wedge \;}
\newcommand{\logicor} 	{\; \vee   \;}

\newcommand{\cardinal}[1]{ \# \; #1  }

\newcommand{\suchthat} 	{\; \text{ \textquotestraightdblbase } \;} 
\newcommand{\with}	{\; {|} \;}

\newcommand{\as}{\; : \;}

\newcommand{\imp}{\rightarrow}
\newcommand{\ifandonlyif}{\leftrightarrow}

\newcommand{\conclude}{\therefore) \; \;}

\newcommand{\isomorph}{\simeq}

\newcommand{ \be }[2]{ #1 \; := \; #2 }

\newcommand{\function}[3]{#1 \; : \; #2 \to #3}

\newcommand{\definedfunction}[5]{
\begin{array}{ r c l }
#1 \;: #2 & \longrightarrow & #3 \\
#4 & \longmapsto & #5
\end{array}
}

\NewDocumentCommand{ \all }{ m o m }{
\IfValueTF {#2}
{ \end{math} \tabmath{$\forall \; #1 \suchthat #2$}{ #3 }\begin{math} }
{ \end{math} \tabmath{$\forall \; #1$}{ #3 } \begin{math} }
}

\NewDocumentCommand{ \ex }{ m m }{ \exists \; #1 \suchthat #2}



% Sets 

\newcommand{\indexes}[2]{[#1,#2]_\N}
\newcommand{\countable}{ \stackrel{ \subset }{ \sim } \N }
\NewDocumentCommand{\set}{ m o }
{
	\IfValueTF {#2}
	{
		\{#1 \with #2 \}
	}{
		\{ #1 \}
	}
}

\NewDocumentCommand{\family}{ m m o o }
{
	\IfValueTF {#3}
	{
		\IfValueTF {#4}
		{
			\{ #1 \}_{ #2 = #3 }^{ #4 }
		}{
			\{ #1 \}_{ #2 \geq #3 } 
		}
	}{
		\{ #1 \}_{ #2 \in \uppercase{ #2 } }
	}
}

\NewDocumentCommand{\vect}{ m m o o }
{
	\IfValueTF {#3}
	{
		\IfValueTF {#4}
		{
			( #1 )_{ #2 = #3 }^{ #4 }
		}{
			( #1 )_{ #2 \geq #3 } 
		}
	}{
		( #1 )_{ #2 \in \uppercase{ #2 } }
	}
}

\newcommand{\minuszero}{ \setminus \{0\} }



% Big Operators 

\NewDocumentCommand{\intersection}{ m m o o }
{
	\IfValueTF {#3}
	{ 
		\IfValueTF {#4}
		{
			\displaystyle\bigcap_{ #2 = #3 }^{ #4 } \; #1
		}{
			\displaystyle\bigcap_{ #2 \geq #3 } \; #1
		} 
	}{
		\displaystyle\bigcap_{ #2 \in \uppercase{ #2 } }  \; #1
	}
}

\NewDocumentCommand{\union}{ m m o o }
{
	\IfValueTF {#3}
	{ 
		\IfValueTF {#4}
		{
			\displaystyle\bigcup_{ #2 = #3 }^{ #4 } \; #1
		}{
			\displaystyle\bigcup_{ #2 \geq #3 } \; #1
		} 
	}{
		\displaystyle\bigcup_{ #2 \in \uppercase{ #2 } } \; #1
	}
}
\NewDocumentCommand{\disjunctunion}{ m m o o }
{
	\IfValueTF {#3}
	{ 
		\IfValueTF {#4}
		{
			\displaystyle\bigcupdot_{ #2 = #3 }^{ #4 } \; #1
		}{
			\displaystyle\bigcupdot_{ #2 \geq #3 } \; #1
		} 
	}{
		\displaystyle\bigcupdot_{ #2 \in \uppercase{ #2 } } \; #1
	}
}

\NewDocumentCommand{\sumatory}{ m m o o }
{
	\IfValueTF {#3}
	{ 
		\IfValueTF {#4}
		{
			\displaystyle\sum_{ #2 = #3 }^{ #4 } \; #1
		}{
			\displaystyle\sum_{ #2 \geq #3 } \; #1
		} 
	}{
		\displaystyle\sum_{ #2 \in \uppercase{ #2 } } \; #1
	}
}

\NewDocumentCommand{\productory}{ m m o o }
{
	\IfValueTF {#3}
	{ 
		\IfValueTF {#4}
		{
			\displaystyle\prod_{ #2 = #3 }^{ #4 } \; #1
		}{
			\displaystyle\prod_{ #2 \geq #3 } \; #1
		} 
	}{
		\displaystyle\prod_{ #2 \in \uppercase{ #2 } } \; #1
	}
}

\newcommand{ \unionoverset }[3]{ \displaystyle\bigcup_{ #2 \in #3 } #1 }
\newcommand{ \intersectionoverset }[3]{ \displaystyle\bigcap_{ #2 \in #3 } #1 }
\newcommand{ \disjunctunionoverset }[3]{ \displaystyle\bigcupdot_{ #2 \in #3 } #1 }
\newcommand{ \sumatoryoverset }[3]{ \displaystyle\sum_{ #2 \in #3 } #1 }
\newcommand{ \productoryoverset }[3]{ \displaystyle\prod_{ #2 \in #3 } #1 }

\newcommand{ \functionspace }[2]{ \mathcal{ F }( #1, #2 ) }
\endinput