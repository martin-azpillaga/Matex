% MaTeX LaTeX package
% Martin Azpillaga

\NeedsTeXFormat{LaTeX2e}[1994/12/01]
\ProvidesPackage{matex} [2014/02/11 version 1.0 MaTeX standard library for LaTeX]



% Required packages

\RequirePackage{amsmath,amssymb}
\RequirePackage[tmargin=20mm,bmargin=20mm,lmargin=20mm,rmargin=20mm]{geometry}
\RequirePackage{fancyhdr}
\RequirePackage{xparse}
\RequirePackage{MnSymbol}
\RequirePackage{hyperref}



% Title page and table of contents

\newcommand{\titlePage}[2]
{
	\title{$#1$}
	\author{$#2$}
	\maketitle
}


\newcommand{\contents}
{
	\tableofcontents
	\cleardoublepage
}



% Low level structure

\newcounter{unitCounter}
\newcounter{blockCounter}[unitCounter]


\newcommand{\unitName}{unit name}
\newcommand{\blockName}{block name}


\newcommand{\block}[1]
{
	\addtocounter{blockCounter}	{1}
	\setcounter	 {unitCounter}	{0}

	\renewcommand{\blockName}{ $#1$ }
	\addcontentsline{toc}{part}{ \Roman{blockCounter} $#1$ }

	\cleardoublepage{}
	\vspace*{\fill}
	\begin{center}
	{
		\bf \Huge{ Block \Roman{blockCounter} } 
	}
	\end{center}
	\vspace*{1cm}
	\begin{center}
	{
		\bf \Huge{ $#1$ } 
	}
	\end{center}
	\vspace*{\fill}
}


\newcommand{\unit}[1]
{
	\addtocounter{unitCounter}{1}

	\renewcommand{\unitName}{ $#1$ }
	\addcontentsline{toc}{chapter}{ \arabic{unitcounter} $#1$ }
	
	\cleartoleftpage{}
	\begin{center}
	{
		\fbox{{ \bf \arabic{unitCounter}. $#1$ }}
	}
	\end{center}
}



% High level structures

\newcommand{\definition}[2]
{
	\addcontentsline{toc}{section}{ $#1$ }

	\begin{noBreak}

		{\bf $#1$} \\
		#2
	
	\end{noBreak}
}


\newcommand{\proposition}[2]
{
	\addcontentsline{toc}{section}{ $#1$ }

	{\bf $#1$} \\
	#2

	\newpage
}


\newcommand{\introduction}[1]
{ 
	$#1$

	\cleardoublepage
}



% Page Style 

\pagestyle{fancy}

\fancyhead[RO,LE]{\thepage}
\fancyhead[RE]{\arabic{unitCounter} \unitName }
\fancyhead[LO]{\Roman{blockCounter} \blockName }

\fancyfoot[C]{\thepage}



% Global environment

\setlength{\parindent}{0cm} 	% no paragraph indentation

\endlinechar=-1\relax 			% no new paragraph with 2 line breaks



% Local environments

\newcommand{\dotEntry}[1]
{
	\\
	\hspace*{\value{tabSpace}pt}
	
	\begin{math}
		\cdot \; #1
	\end{math}
}


\newcommand{\noDotEntry[1]
{
	\\
	\hspace*{\value{tabSpace}pt}
	
	\begin{math}
		#1
	\end{math}
}


\newenvironment{noBreak}
  {\par\nobreak\vfil\penalty0\vfilneg
   \vtop\bgroup}
  {\par\xdef\tpd{\the\prevdepth}\egroup
   \prevdepth=\tpd}
\newcommand*\cleartoleftpage{%
  \clearpage
  \ifodd\value{page}\hbox{}\newpage\fi
}






\newcounter{tabSpace}

\newcommand{\arrayEntry}[1]
{
	#1 \\
}

\NewDocumentCommand{\multiple}{O{.}O{.} >{\SplitList{.}} m}{
\left #1
\begin{array}{l}
\ProcessList{ #3 }{\arrayEntry}
\end{array}
\right #2
}

\NewDocumentCommand{\tabtext}{ m >{\SplitList{.}} m }{%
#1:
\addtocounter{tabspace}{15}
\ProcessList{ #2 }{ \myitem }
\addtocounter{tabspace}{-15}
\\
}

\NewDocumentCommand{\tabmath}{ m >{\SplitList{.}} m }{%
#1:
\addtocounter{tabspace}{15}%
\ProcessList{ #2 }{ \nodotentry }%
\addtocounter{tabspace}{-15}%
}%



% Math Structures

\renewcommand{\let}[1] {\tabtext{Let}{#1}}

\newcommand{\letbe}[1] {\tabtext{Let}{#1}}

\newcommand{\then}[3]  {\tabtext{Then, $#1$ is $#2$ if}{#3}}

\newcommand{\call}[2]  {\tabtext{We call $#1$ to}{#2}}

\newcommand{\denote}[1]{\tabtext{We denote}{#1}}


\newcommand{\holds}[1] {\tabtext{Then, holds}{#1}}

\newcommand{\demonstration}[1]{\tabmath{Demonstration}{#1}}


% Demonstration Structures

\newcommand{\rightinclusion}[1]{\end{math}\tabmath{$\subset$)}{ #1 }\begin{math}}
\newcommand{\leftinclusion} [1]{\end{math}\tabmath{$\supset$)}{ #1 }\begin{math}}

\newcommand{\rightway}[1]{\end{math}\tabmath{$\rightarrow$)}{ #1 }\begin{math}}
\newcommand{\leftway} [1]{\end{math}\tabmath{$\leftarrow$)} { #1 }\begin{math}}

\newcommand{\upperbound}[1]{\end{math}\tabmath{$\leq$)}{ #1 }\begin{math}}
\newcommand{\lowerbound}[1]{\end{math}\tabmath{$\geq$)}{ #1 }\begin{math}}

\newcommand{\induction}[2]{\end{math}\tabmath{Induction over $#1$}{ #2 }\begin{math}}

\newcommand{\counterreciprocal}[3]{\end{math}\tabmath{Counter-reciprocal: $#1 \imp #2$ }{ #3 }\begin{math}}

\newcommand{\absurd}[2]{\end{math}\tabmath{Absurd: $#1$}{#2}\begin{math}}

\newcommand{\case}[2]{\end{math}\tabmath{Case $#1$}{#2}\begin{math}}

\newcommand{\step}[3]{\end{math}\tabmath{Step $#1$: $#2$}{ #3 }\begin{math}}



\newcommand{\similarly}[1]{\end{math}\tabmath{Similarly}{ #1 }\begin{math}}


% Calligraphy

\newcommand  	{\A}{\mathbb{A}}
\newcommand  	{\B}{\mathbb{B}}
\newcommand  	{\C}{\mathbb{C}}
\newcommand  	{\D}{\mathbb{D}}
\newcommand  	{\E}{\mathbb{E}}
\newcommand  	{\F}{\mathbb{F}}
\newcommand  	{\G}{\mathbb{G}}
\renewcommand	{\H}{\mathbb{H}}
\newcommand  	{\I}{\mathbb{I}}
\newcommand  	{\J}{\mathbb{J}}
\newcommand  	{\K}{\mathbb{K}}
\renewcommand	{\L}{\mathbb{L}}
\newcommand  	{\M}{\mathbb{M}}
\newcommand  	{\N}{\mathbb{N}}
\renewcommand	{\O}{\mathbb{O}}
\renewcommand	{\P}{\mathbb{P}}
\newcommand  	{\Q}{\mathbb{Q}}
\newcommand  	{\R}{\mathbb{R}}
\renewcommand	{\S}{\mathbb{S}}
\newcommand  	{\T}{\mathbb{T}}
\newcommand  	{\U}{\mathbb{U}}
\newcommand  	{\V}{\mathbb{V}}
\newcommand  	{\W}{\mathbb{W}}
\newcommand  	{\X}{\mathbb{X}}
\newcommand  	{\Y}{\mathbb{Y}}
\newcommand  	{\Z}{\mathbb{Z}}

\newcommand	{\Ac}{\mathcal{A}}
\newcommand	{\Bc}{\mathcal{B}}
\newcommand	{\Cc}{\mathcal{C}}
\newcommand	{\Dc}{\mathcal{D}}
\newcommand	{\Ec}{\mathcal{E}}
\newcommand	{\Fc}{\mathcal{F}}
\newcommand	{\Gc}{\mathcal{G}}
\newcommand	{\Hc}{\mathcal{H}}
\newcommand	{\Ic}{\mathcal{I}}
\newcommand	{\Jc}{\mathcal{J}}
\newcommand	{\Kc}{\mathcal{K}}
\newcommand	{\Lc}{\mathcal{L}}
\newcommand	{\Mc}{\mathcal{M}}
\newcommand	{\Nc}{\mathcal{N}}
\newcommand	{\Oc}{\mathcal{O}}
\newcommand	{\Pc}{\mathcal{P}}
\newcommand	{\Qc}{\mathcal{Q}}
\newcommand	{\Rc}{\mathcal{R}}
\newcommand	{\Sc}{\mathcal{S}}
\newcommand	{\Tc}{\mathcal{T}}
\newcommand	{\Uc}{\mathcal{U}}
\newcommand	{\Vc}{\mathcal{V}}
\newcommand	{\Wc}{\mathcal{W}}
\newcommand	{\Xc}{\mathcal{X}}
\newcommand	{\Yc}{\mathcal{Y}}
\newcommand	{\Zc}{\mathcal{Z}}

\renewcommand{\epsilon}{\varepsilon}


% Logic

\newcommand{\logicand}	{\; \wedge \;}
\newcommand{\logicor} 	{\; \vee   \;}

\newcommand{\cardinal}[1]{ \# \; #1  }

\newcommand{\suchthat} 	{\; \text{ \textquotestraightdblbase } \;} 
\newcommand{\with}	{\; {|} \;}

\newcommand{\as}{\; : \;}

\newcommand{\imp}{\rightarrow}
\newcommand{\ifandonlyif}{\leftrightarrow}

\newcommand{\conclude}{\therefore) \; \;}

\newcommand{\isomorph}{\simeq}

\newcommand{ \be }[2]{ #1 \; := \; #2 }

\newcommand{\function}[3]{#1 \; : \; #2 \to #3}

\newcommand{\definedfunction}[5]{
\begin{array}{ r c l }
#1 \;: #2 & \longrightarrow & #3 \\
#4 & \longmapsto & #5
\end{array}
}

\NewDocumentCommand{ \all }{ m o m }{
\IfValueTF {#2}
{ \end{math} \tabmath{$\forall \; #1 \suchthat #2$}{ #3 }\begin{math} }
{ \end{math} \tabmath{$\forall \; #1$}{ #3 } \begin{math} }
}

\NewDocumentCommand{ \ex }{ m m }{ \exists \; #1 \suchthat #2}



% Sets 

\newcommand{\indexes}[2]{[#1,#2]_\N}
\newcommand{\countable}{ \stackrel{ \subset }{ \sim } \N }
\NewDocumentCommand{\set}{ m o }
{
	\IfValueTF {#2}
	{
		\{#1 \with #2 \}
	}{
		\{ #1 \}
	}
}

\NewDocumentCommand{\family}{ m m o o }
{
	\IfValueTF {#3}
	{
		\IfValueTF {#4}
		{
			\{ #1 \}_{ #2 = #3 }^{ #4 }
		}{
			\{ #1 \}_{ #2 \geq #3 } 
		}
	}{
		\{ #1 \}_{ #2 \in \uppercase{ #2 } }
	}
}

\NewDocumentCommand{\vect}{ m m o o }
{
	\IfValueTF {#3}
	{
		\IfValueTF {#4}
		{
			( #1 )_{ #2 = #3 }^{ #4 }
		}{
			( #1 )_{ #2 \geq #3 } 
		}
	}{
		( #1 )_{ #2 \in \uppercase{ #2 } }
	}
}

\newcommand{\minuszero}{ \setminus \{0\} }



% Big Operators 

\NewDocumentCommand{\intersection}{ m m o o }
{
	\IfValueTF {#3}
	{ 
		\IfValueTF {#4}
		{
			\displaystyle\bigcap_{ #2 = #3 }^{ #4 } \; #1
		}{
			\displaystyle\bigcap_{ #2 \geq #3 } \; #1
		} 
	}{
		\displaystyle\bigcap_{ #2 \in \uppercase{ #2 } }  \; #1
	}
}

\NewDocumentCommand{\union}{ m m o o }
{
	\IfValueTF {#3}
	{ 
		\IfValueTF {#4}
		{
			\displaystyle\bigcup_{ #2 = #3 }^{ #4 } \; #1
		}{
			\displaystyle\bigcup_{ #2 \geq #3 } \; #1
		} 
	}{
		\displaystyle\bigcup_{ #2 \in \uppercase{ #2 } } \; #1
	}
}
\NewDocumentCommand{\disjunctunion}{ m m o o }
{
	\IfValueTF {#3}
	{ 
		\IfValueTF {#4}
		{
			\displaystyle\bigcupdot_{ #2 = #3 }^{ #4 } \; #1
		}{
			\displaystyle\bigcupdot_{ #2 \geq #3 } \; #1
		} 
	}{
		\displaystyle\bigcupdot_{ #2 \in \uppercase{ #2 } } \; #1
	}
}

\NewDocumentCommand{\sumatory}{ m m o o }
{
	\IfValueTF {#3}
	{ 
		\IfValueTF {#4}
		{
			\displaystyle\sum_{ #2 = #3 }^{ #4 } \; #1
		}{
			\displaystyle\sum_{ #2 \geq #3 } \; #1
		} 
	}{
		\displaystyle\sum_{ #2 \in \uppercase{ #2 } } \; #1
	}
}

\NewDocumentCommand{\productory}{ m m o o }
{
	\IfValueTF {#3}
	{ 
		\IfValueTF {#4}
		{
			\displaystyle\prod_{ #2 = #3 }^{ #4 } \; #1
		}{
			\displaystyle\prod_{ #2 \geq #3 } \; #1
		} 
	}{
		\displaystyle\prod_{ #2 \in \uppercase{ #2 } } \; #1
	}
}

\newcommand{ \unionoverset }[3]{ \displaystyle\bigcup_{ #2 \in #3 } #1 }
\newcommand{ \intersectionoverset }[3]{ \displaystyle\bigcap_{ #2 \in #3 } #1 }
\newcommand{ \disjunctunionoverset }[3]{ \displaystyle\bigcupdot_{ #2 \in #3 } #1 }
\newcommand{ \sumatoryoverset }[3]{ \displaystyle\sum_{ #2 \in #3 } #1 }
\newcommand{ \productoryoverset }[3]{ \displaystyle\prod_{ #2 \in #3 } #1 }

\newcommand{ \functionspace }[2]{ \mathcal{ F }( #1, #2 ) }

% Hacks




\endinput